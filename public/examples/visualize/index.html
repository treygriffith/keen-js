<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Keen IO | Visualization JS</title>
	
	<script type="text/javascript" src='https://www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1","packages":["corechart","table"]}]}'></script>
	
	<script type="text/javascript" src="../../src/plugins/visualization/lib/d3.v3.min.js"></script>
	<script type="text/javascript" src="../../src/plugins/visualization/lib/nv.d3.min.js"></script>
	
  <script type="text/javascript" src="../../dist/keen-3.0.0.visualize.js"></script>
	<script type="text/javascript" src="../../src/plugins/visualization/keen-nvd3.js"></script>
	<script type="text/javascript" src="../../src/plugins/visualization/keen-googlecharts.js"></script>

  <script type="text/javascript">

		var keen = new Keen({
			projectId: "52f2ae5905cd661a7800000a",
			readKey: "4e4d72e5bf8b69686ed87a5a9671bba7ad829fbd10a1c281ee51b6e9c1ce9548e941e1f336f9de9281a5acc66ca8fdabc9b3c806e390eca01665f6a308a9b03d8b332b3fbd9f3cdfc3b3e16b0da6d84851e53fe20fbbce300801b8a401a6395b9f4ab9c89bff566e9678a74ca6624f9b",
			protocol: "https",
			//host: 'analytics.yourdomain.com',
			requestType: "xhr" // "jsonp" "beacon" 
		});
		
		/*
				ANALYSIS TYPES
		*/
		
		// Pie Chart
		
		var count = new Keen.Count('pageview', {
			targetProperty: 'page',
			groupBy: 'page'
		});
		
		var widget = keen.query(count, function(response){
			console.log('callback', response);
			//this.draw("#first", { library: 'nvd3', type: 'pie' });
			this.draw("#first", { library: 'google', type: 'pie' });
		});
		
		
		// Interval Chart
		
		var count_daily = new Keen.Count('pageview', {
			targetProperty: 'page',
			groupBy: 'page',
			timeframe: 'last_month',
			interval: 'daily'
		});
		
		var interval = keen.query(count_daily, function(){
			//this.draw("#first", { library: 'google', type: 'line' });
		});
		
		var chart = new Keen.Visualization(interval, '#second', { 
			library: 'google', 
			type: 'line', 
			title: 'Counting Page Views is Fun!',
			vAxis: { title: "Y" },
    	hAxis: { title: "X" }
		});
		
	</script>

</head>
<body>
	<div id="first" style="float: left; width: 50%;"></div>
	<div id="second" style="float: right; width: 50%;"></div>
</body>
</html>

